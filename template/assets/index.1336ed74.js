import{a4 as x,o as u,S as g,f as P,e as $,y as Y,c as v,a as m,T as l,_ as i,Z as L,Y as y,aw as G,ax as z,H as b,a8 as S,W as R,X as J,O as j,$ as Q,ay as ee,at as te}from"./_@vue.73c7d285.js";import{X as oe,Y as O,Z as H,_ as B,$ as se,a0 as ne,a1 as ae,a2 as le}from"./__vendor.467a6c12.js";import{E as q,a as I,b as re,c as U,d as K,e as W,f as ce,g as ie,h as de,i as ue,j as _e,l as pe}from"./_element-plus.a7707325.js";import{N as F}from"./_@element-plus.8770ec28.js";const me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}};me();var C=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const fe={};function ge(e,t,n,o,s,d){const c=x("router-view");return u(),g(c)}var he=C(fe,[["render",ge]]);const ve="modulepreload",D={},xe="./",T=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${xe}${o}`,o in D)return;D[o]=!0;const s=o.endsWith(".css"),d=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":ve,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((_,p)=>{c.addEventListener("load",_),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},f="",V={getCode:f+"/login",getAccessToken:f+"/at",getUserinfo:f+"/userinfo",getSize:f+"/size",getList:f+"/list",getFilemeta:f+"/meta",getFiles:f+"/download",getRun:f+"/run",getStop:f+"/stop",getStatus:f+"/status",delTask:f+"/deltask",delFiles:f+"/delfiles"},A=oe.create({timeout:5e4}),ye=e=>{let t={title:"",message:""};if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),t.title="\u9519\u8BEF"+e.response.status+" "+e.response.data.message,e.request.status==401&&window.location.reload(),Object.prototype.toString.call(e.response.data.errors)==="[object Object]"){for(const n in e.response.data.errors)if(Object.hasOwnProperty.call(e.response.data.errors,n)){const o=e.response.data.errors[n];t.message+=o.join(",")}}else t.message=e.response.data.errors;else e.request?console.log(e.request):console.log("Error",e.message);return q({title:t.title,type:"error",message:t.message}),console.log(e.message),Promise.reject(e)};A.interceptors.response.use(e=>{const{data:t}=e;return t.code!==200?(q({title:"\u8BF7\u6C42\u5931\u8D25",message:t.message,type:"error"}),RegExp(/\"errno\":-6/).test(t.message)&&(window.location.href="/#/login"),Promise.reject(new Error(t.message||"Error"))):e},ye);function N(e){if(!e)return"0K";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}const we={setup(){const e=P(""),t=P(""),n=P(""),o=P(0);(()=>{A({url:V.getSize,method:"get"}).then(r=>{e.value=N(r.data.data.used)+"/"+N(r.data.data.total),o.value=r.data.data.used/r.data.data.total*100}),A({url:V.getUserinfo,method:"get"}).then(r=>{t.value=r.data.data.baidu_name,n.value=r.data.data.avatar_url})})();const d=O(),c=$(()=>d.state.collapse),_=()=>{d.commit("handleCollapse",!c.value)};Y(()=>{document.body.clientWidth<1500&&_()});const p=H();return{progress:o,size:e,username:t,avatar:n,collapse:c,collapseChage:_,handleCommand:r=>{r=="loginout"?p.push("/login"):r=="user"&&p.push("/user")}}}},Ee=e=>(G("data-v-94907318"),e=e(),z(),e),Le={class:"header"},$e=Ee(()=>m("div",{class:"logo"},"\u5EA6\u76D8\u7BA1\u7406",-1)),be={class:"header-right"},ke={class:"header-user-con"},Te={class:"diskuse"},Ce={style:{color:"#fff"}},Pe={class:"user-avator"},Se=["src"],Oe={class:"el-dropdown-link"},Re=y("\u4E2A\u4EBA\u4E2D\u5FC3"),Ae=y("\u9000\u51FA\u767B\u5F55");function Ie(e,t,n,o,s,d){const c=x("fold"),_=I,p=x("expand"),w=re,r=x("caret-bottom"),a=U,h=K,E=W;return u(),v("div",Le,[m("div",{class:"collapse-btn",onClick:t[0]||(t[0]=(...k)=>o.collapseChage&&o.collapseChage(...k))},[o.collapse?(u(),g(_,{key:1},{default:l(()=>[i(p)]),_:1})):(u(),g(_,{key:0},{default:l(()=>[i(c)]),_:1}))]),$e,m("div",be,[m("div",ke,[m("div",Te,[i(w,{percentage:o.progress},{default:l(()=>[m("span",Ce,L(o.size),1)]),_:1},8,["percentage"])]),m("div",Pe,[m("img",{src:o.avatar},null,8,Se)]),i(E,{class:"user-name",trigger:"click",onCommand:o.handleCommand},{dropdown:l(()=>[i(h,null,{default:l(()=>[i(a,{command:"user"},{default:l(()=>[Re]),_:1}),i(a,{divided:"",command:"loginout"},{default:l(()=>[Ae]),_:1})]),_:1})]),default:l(()=>[m("span",Oe,[y(L(o.username)+" ",1),i(_,null,{default:l(()=>[i(r)]),_:1})])]),_:1},8,["onCommand"])])])])}var Me=C(we,[["render",Ie],["__scopeId","data-v-94907318"]]);const Fe={setup(){const e=[{icon:"Files",index:"/files",title:"\u5168\u90E8\u6587\u4EF6"},{icon:"VideoPlay",index:"/run",title:"\u6B63\u5728\u4E0B\u8F7D"},{icon:"List",index:"/status",title:"\u4E0B\u8F7D\u5B8C\u6210"}],t=B(),n=$(()=>t.path),o=O(),s=$(()=>o.state.collapse);return{items:e,onRoutes:n,collapse:s}}},De={class:"sidebar"};function Ve(e,t,n,o,s,d){const c=I,_=ie,p=de,w=ce;return u(),v("div",De,[i(w,{class:"sidebar-el-menu","default-active":o.onRoutes,collapse:o.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""},{default:l(()=>[(u(!0),v(b,null,S(o.items,r=>(u(),v(b,null,[r.subs?(u(),g(p,{index:r.index,key:r.index},{title:l(()=>[i(c,null,{default:l(()=>[(u(),g(R(r.icon)))]),_:2},1024),m("span",null,L(r.title),1)]),default:l(()=>[(u(!0),v(b,null,S(r.subs,a=>(u(),v(b,null,[a.subs?(u(),g(p,{index:a.index,key:a.index},{title:l(()=>[y(L(a.title),1)]),default:l(()=>[(u(!0),v(b,null,S(a.subs,(h,E)=>(u(),g(_,{key:E,index:h.index},{default:l(()=>[y(L(h.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(u(),g(_,{index:a.index,key:a.index},{default:l(()=>[y(L(a.title),1)]),_:2},1032,["index"]))],64))),256))]),_:2},1032,["index"])):(u(),g(_,{index:r.index,key:r.index},{title:l(()=>[y(L(r.title),1)]),default:l(()=>[i(c,null,{default:l(()=>[(u(),g(R(r.icon)))]),_:2},1024)]),_:2},1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse"])])}var Ne=C(Fe,[["render",Ve],["__scopeId","data-v-e31cbdac"]]);const je={setup(){const e=B(),t=H(),n=a=>a===e.fullPath,o=O(),s=$(()=>o.state.tagsList),d=$(()=>s.value.length>0),c=a=>{const h=s.value[a];o.commit("delTagsItem",{index:a});const E=s.value[a]?s.value[a]:s.value[a-1];E?h.path===e.fullPath&&t.push(E.path):t.push("/")},_=a=>{s.value.some(E=>E.path===a.fullPath)||(s.value.length>=8&&o.commit("delTagsItem",{index:0}),o.commit("setTagsItem",{name:a.name,title:a.meta.title,path:a.fullPath}))};_(e),se(a=>{_(a)});const p=()=>{o.commit("clearTags"),t.push("/")},w=()=>{const a=s.value.filter(h=>h.path===e.fullPath);o.commit("closeTagsOther",a)};return{isActive:n,tagsList:s,showTags:d,closeTags:c,handleTags:a=>{a==="other"?w():p()}}}},He={key:0,class:"tags"},Be=["onClick"],qe={class:"tags-close-box"},Ue=y(" \u6807\u7B7E\u9009\u9879 "),Ke=y("\u5173\u95ED\u5176\u4ED6"),We=y("\u5173\u95ED\u6240\u6709");function Ze(e,t,n,o,s,d){const c=x("router-link"),_=x("close"),p=I,w=x("arrow-down"),r=ue,a=U,h=K,E=W;return o.showTags?(u(),v("div",He,[m("ul",null,[(u(!0),v(b,null,S(o.tagsList,(k,M)=>(u(),v("li",{class:j(["tags-li",{active:o.isActive(k.path)}]),key:M},[i(c,{to:k.path,class:"tags-li-title"},{default:l(()=>[y(L(k.title),1)]),_:2},1032,["to"]),m("span",{class:"tags-li-icon",onClick:st=>o.closeTags(M)},[i(p,null,{default:l(()=>[i(_)]),_:1})],8,Be)],2))),128))]),m("div",qe,[i(E,{onCommand:o.handleTags},{dropdown:l(()=>[i(h,{size:"small"},{default:l(()=>[i(a,{command:"other"},{default:l(()=>[Ke]),_:1}),i(a,{command:"all"},{default:l(()=>[We]),_:1})]),_:1})]),default:l(()=>[i(r,{size:"mini",type:"primary"},{default:l(()=>[Ue,i(p,null,{default:l(()=>[i(w)]),_:1})]),_:1})]),_:1},8,["onCommand"])])])):J("",!0)}var Xe=C(je,[["render",Ze]]);const Ye={components:{vHeader:Me,vSidebar:Ne,vTags:Xe},setup(){const e=O(),t=$(()=>e.state.tagsList.map(o=>o.name)),n=$(()=>e.state.collapse);return{tagsList:t,collapse:n}}},Ge={class:"about"},ze={class:"content"};function Je(e,t,n,o,s,d){const c=x("v-header"),_=x("v-sidebar"),p=x("v-tags"),w=x("router-view");return u(),v("div",Ge,[i(c),i(_),m("div",{class:j(["content-box",{"content-collapse":o.collapse}])},[i(p),m("div",ze,[i(w,null,{default:l(({Component:r})=>[i(Q,{name:"move",mode:"out-in"},{default:l(()=>[(u(),g(ee,{include:o.tagsList},[(u(),g(R(r)))],1032,["include"]))]),_:2},1024)]),_:1})])],2)])}var Qe=C(Ye,[["render",Je]]);const et=[{path:"/",redirect:"/files"},{path:"/",name:"Home",component:Qe,children:[{path:"/:patchMatch(.*)",redirect:"/404"},{path:"/files",name:"Files",meta:{title:"\u5168\u90E8\u6587\u4EF6"},component:()=>T(()=>import("./files.cd56ac2d.js"),["assets/files.cd56ac2d.js","assets/files.0e37c960.css","assets/_element-plus.a7707325.js","assets/_element-plus.e60ea084.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/run",name:"Run",meta:{title:"\u6B63\u5728\u4E0B\u8F7D"},component:()=>T(()=>import("./run.4216b178.js"),["assets/run.4216b178.js","assets/run.db61edd0.css","assets/_element-plus.a7707325.js","assets/_element-plus.e60ea084.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/status",name:"Status",meta:{title:"\u4E0B\u8F7D\u5B8C\u6210"},component:()=>T(()=>import("./status.cb584006.js"),["assets/status.cb584006.js","assets/status.96f898ff.css","assets/_element-plus.a7707325.js","assets/_element-plus.e60ea084.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/404",name:"404",meta:{title:"\u627E\u4E0D\u5230\u9875\u9762"},component:()=>T(()=>import("./404.ef8c345e.js"),["assets/404.ef8c345e.js","assets/404.01007f15.css","assets/_element-plus.a7707325.js","assets/_element-plus.e60ea084.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])}]},{path:"/login",name:"Login",meta:{title:"\u7EF4\u4FDD\u767B\u5F55"},component:()=>T(()=>import("./login.efb0b78a.js"),["assets/login.efb0b78a.js","assets/login.291c0aa1.css","assets/_element-plus.a7707325.js","assets/_element-plus.e60ea084.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])}],Z=ne({history:ae(),routes:et});Z.beforeEach((e,t,n)=>{document.title=`${e.meta.title} | \u5EA6\u76D8\u7BA1\u7406`,n()});var tt=le({state:{tagsList:[],collapse:!1},mutations:{delTagsItem(e,t){e.tagsList.splice(t.index,1)},setTagsItem(e,t){e.tagsList.push(t)},clearTags(e){e.tagsList=[]},closeTagsOther(e,t){e.tagsList=t},closeCurrentTag(e,t){for(let n=0,o=e.tagsList.length;n<o;n++)if(e.tagsList[n].path===t.$route.fullPath){n<o-1?t.$router.push(e.tagsList[n+1].path):n>0?t.$router.push(e.tagsList[n-1].path):t.$router.push("/"),e.tagsList.splice(n,1);break}},handleCollapse(e,t){e.collapse=t}},actions:{},modules:{}}),ot=e=>{for(const t in F)e.component(t,F[t]);e.use(_e,{locale:pe})};const X=te(he);ot(X);X.use(tt).use(Z).mount("#app");export{C as _,V as a,N as g,A as s};
