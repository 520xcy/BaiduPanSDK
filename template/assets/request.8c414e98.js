import{X as i}from"./__vendor.467a6c12.js";import{w as c,E as n}from"./_element-plus.3a35db37.js";let o;const r=i.create({timeout:5e4}),l=e=>{o.close();let s={title:"",message:""};if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),s.title="\u9519\u8BEF"+e.response.status+" "+e.response.data.message,e.request.status==401&&(localStorage.removeItem("baidusdk"),window.location.reload()),Object.prototype.toString.call(e.response.data.errors)==="[object Object]"){for(const t in e.response.data.errors)if(Object.hasOwnProperty.call(e.response.data.errors,t)){const a=e.response.data.errors[t];s.message+=a.join(",")}}else s.message=e.response.data.errors;else e.request?console.log(e.request):console.log("Error",e.message);return n({title:s.title,type:"error",message:s.message}),console.log(e.message),Promise.reject(e)};r.interceptors.request.use(e=>{o=c.service({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.4)"});const s=localStorage.getItem("baidusdk");return s&&(e.headers.Baidusdk=s),e},l);r.interceptors.response.use(e=>{const{data:s}=e;return o.close(),s.code!==200?(n({title:"\u8BF7\u6C42\u5931\u8D25",message:s.message,type:"error"}),RegExp(/\"errno\":-6/).test(s.message)&&(window.location.href="/#/login"),Promise.reject(new Error(s.message||"Error"))):e},l);export{r as s};
