import{a4 as y,o as u,S as g,f as P,e as L,y as G,c as v,a as m,T as l,_ as i,Z as k,Y as x,aw as z,ax as J,H as $,a8 as S,W as R,X as Q,O as j,$ as ee,ay as te,at as oe}from"./_@vue.73c7d285.js";import{X as se,Y as I,Z as B,_ as H,$ as ne,a0 as ae,a1 as le,a2 as re}from"./__vendor.467a6c12.js";import{E as q,a as A,b as ce,c as U,d as K,e as W,f as ie,g as de,h as ue,i as _e,j as pe,l as me}from"./_element-plus.3a35db37.js";import{N as D}from"./_@element-plus.8770ec28.js";const fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}};fe();var C=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const ge={};function he(e,t,n,o,s,d){const c=y("router-view");return u(),g(c)}var ve=C(ge,[["render",he]]);const ye="modulepreload",F={},xe="./",b=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${xe}${o}`,o in F)return;F[o]=!0;const s=o.endsWith(".css"),d=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":ye,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((_,p)=>{c.addEventListener("load",_),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},f="",V={getLogin:f+"/api/login",getCode:f+"/api/code",getAccessToken:f+"/api/at",getUserinfo:f+"/api/userinfo",getSize:f+"/api/size",getList:f+"/api/list",getFilemeta:f+"/api/meta",getFiles:f+"/api/download",getRun:f+"/api/run",getStop:f+"/api/stop",getStatus:f+"/api/status",delTask:f+"/api/deltask",delFiles:f+"/api/delfiles"},O=se.create({timeout:5e4}),Z=e=>{let t={title:"",message:""};if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),t.title="\u9519\u8BEF"+e.response.status+" "+e.response.data.message,e.request.status==401&&(localStorage.removeItem("baidusdk"),window.location.reload()),Object.prototype.toString.call(e.response.data.errors)==="[object Object]"){for(const n in e.response.data.errors)if(Object.hasOwnProperty.call(e.response.data.errors,n)){const o=e.response.data.errors[n];t.message+=o.join(",")}}else t.message=e.response.data.errors;else e.request?console.log(e.request):console.log("Error",e.message);return q({title:t.title,type:"error",message:t.message}),console.log(e.message),Promise.reject(e)};O.interceptors.request.use(e=>{const t=localStorage.getItem("baidusdk");return t&&(e.headers.Baidusdk=t),e},Z);O.interceptors.response.use(e=>{const{data:t}=e;return t.code!==200?(q({title:"\u8BF7\u6C42\u5931\u8D25",message:t.message,type:"error"}),RegExp(/\"errno\":-6/).test(t.message)&&(window.location.href="/#/login"),Promise.reject(new Error(t.message||"Error"))):e},Z);function N(e){if(!e)return"0K";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}const we={setup(){const e=P(""),t=P(""),n=P(""),o=P(0);(()=>{O({url:V.getSize,method:"get"}).then(r=>{e.value=N(r.data.data.used)+"/"+N(r.data.data.total),o.value=r.data.data.used/r.data.data.total*100}),O({url:V.getUserinfo,method:"get"}).then(r=>{t.value=r.data.data.baidu_name,n.value=r.data.data.avatar_url})})();const d=I(),c=L(()=>d.state.collapse),_=()=>{d.commit("handleCollapse",!c.value)};G(()=>{document.body.clientWidth<1500&&_()});const p=B();return{progress:o,size:e,username:t,avatar:n,collapse:c,collapseChage:_,handleCommand:r=>{r=="loginout"?p.push("/login"):r=="user"&&p.push("/user")}}}},Ee=e=>(z("data-v-94907318"),e=e(),J(),e),ke={class:"header"},Le=Ee(()=>m("div",{class:"logo"},"\u5EA6\u76D8\u7BA1\u7406",-1)),be={class:"header-right"},$e={class:"header-user-con"},Te={class:"diskuse"},Ce={style:{color:"#fff"}},Pe={class:"user-avator"},Se=["src"],Oe={class:"el-dropdown-link"},Ie=x("\u4E2A\u4EBA\u4E2D\u5FC3"),Re=x("\u9000\u51FA\u767B\u5F55");function Ae(e,t,n,o,s,d){const c=y("fold"),_=A,p=y("expand"),w=ce,r=y("caret-bottom"),a=U,h=K,E=W;return u(),v("div",ke,[m("div",{class:"collapse-btn",onClick:t[0]||(t[0]=(...T)=>o.collapseChage&&o.collapseChage(...T))},[o.collapse?(u(),g(_,{key:1},{default:l(()=>[i(p)]),_:1})):(u(),g(_,{key:0},{default:l(()=>[i(c)]),_:1}))]),Le,m("div",be,[m("div",$e,[m("div",Te,[i(w,{percentage:o.progress},{default:l(()=>[m("span",Ce,k(o.size),1)]),_:1},8,["percentage"])]),m("div",Pe,[m("img",{src:o.avatar},null,8,Se)]),i(E,{class:"user-name",trigger:"click",onCommand:o.handleCommand},{dropdown:l(()=>[i(h,null,{default:l(()=>[i(a,{command:"user"},{default:l(()=>[Ie]),_:1}),i(a,{divided:"",command:"loginout"},{default:l(()=>[Re]),_:1})]),_:1})]),default:l(()=>[m("span",Oe,[x(k(o.username)+" ",1),i(_,null,{default:l(()=>[i(r)]),_:1})])]),_:1},8,["onCommand"])])])])}var Me=C(we,[["render",Ae],["__scopeId","data-v-94907318"]]);const De={setup(){const e=[{icon:"Files",index:"/files",title:"\u5168\u90E8\u6587\u4EF6"},{icon:"VideoPlay",index:"/run",title:"\u6B63\u5728\u4E0B\u8F7D"},{icon:"List",index:"/status",title:"\u4E0B\u8F7D\u5B8C\u6210"}],t=H(),n=L(()=>t.path),o=I(),s=L(()=>o.state.collapse);return{items:e,onRoutes:n,collapse:s}}},Fe={class:"sidebar"};function Ve(e,t,n,o,s,d){const c=A,_=de,p=ue,w=ie;return u(),v("div",Fe,[i(w,{class:"sidebar-el-menu","default-active":o.onRoutes,collapse:o.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""},{default:l(()=>[(u(!0),v($,null,S(o.items,r=>(u(),v($,null,[r.subs?(u(),g(p,{index:r.index,key:r.index},{title:l(()=>[i(c,null,{default:l(()=>[(u(),g(R(r.icon)))]),_:2},1024),m("span",null,k(r.title),1)]),default:l(()=>[(u(!0),v($,null,S(r.subs,a=>(u(),v($,null,[a.subs?(u(),g(p,{index:a.index,key:a.index},{title:l(()=>[x(k(a.title),1)]),default:l(()=>[(u(!0),v($,null,S(a.subs,(h,E)=>(u(),g(_,{key:E,index:h.index},{default:l(()=>[x(k(h.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(u(),g(_,{index:a.index,key:a.index},{default:l(()=>[x(k(a.title),1)]),_:2},1032,["index"]))],64))),256))]),_:2},1032,["index"])):(u(),g(_,{index:r.index,key:r.index},{title:l(()=>[x(k(r.title),1)]),default:l(()=>[i(c,null,{default:l(()=>[(u(),g(R(r.icon)))]),_:2},1024)]),_:2},1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse"])])}var Ne=C(De,[["render",Ve],["__scopeId","data-v-e31cbdac"]]);const je={setup(){const e=H(),t=B(),n=a=>a===e.fullPath,o=I(),s=L(()=>o.state.tagsList),d=L(()=>s.value.length>0),c=a=>{const h=s.value[a];o.commit("delTagsItem",{index:a});const E=s.value[a]?s.value[a]:s.value[a-1];E?h.path===e.fullPath&&t.push(E.path):t.push("/")},_=a=>{s.value.some(E=>E.path===a.fullPath)||(s.value.length>=8&&o.commit("delTagsItem",{index:0}),o.commit("setTagsItem",{name:a.name,title:a.meta.title,path:a.fullPath}))};_(e),ne(a=>{_(a)});const p=()=>{o.commit("clearTags"),t.push("/")},w=()=>{const a=s.value.filter(h=>h.path===e.fullPath);o.commit("closeTagsOther",a)};return{isActive:n,tagsList:s,showTags:d,closeTags:c,handleTags:a=>{a==="other"?w():p()}}}},Be={key:0,class:"tags"},He=["onClick"],qe={class:"tags-close-box"},Ue=x(" \u6807\u7B7E\u9009\u9879 "),Ke=x("\u5173\u95ED\u5176\u4ED6"),We=x("\u5173\u95ED\u6240\u6709");function Ze(e,t,n,o,s,d){const c=y("router-link"),_=y("close"),p=A,w=y("arrow-down"),r=_e,a=U,h=K,E=W;return o.showTags?(u(),v("div",Be,[m("ul",null,[(u(!0),v($,null,S(o.tagsList,(T,M)=>(u(),v("li",{class:j(["tags-li",{active:o.isActive(T.path)}]),key:M},[i(c,{to:T.path,class:"tags-li-title"},{default:l(()=>[x(k(T.title),1)]),_:2},1032,["to"]),m("span",{class:"tags-li-icon",onClick:st=>o.closeTags(M)},[i(p,null,{default:l(()=>[i(_)]),_:1})],8,He)],2))),128))]),m("div",qe,[i(E,{onCommand:o.handleTags},{dropdown:l(()=>[i(h,{size:"small"},{default:l(()=>[i(a,{command:"other"},{default:l(()=>[Ke]),_:1}),i(a,{command:"all"},{default:l(()=>[We]),_:1})]),_:1})]),default:l(()=>[i(r,{size:"mini",type:"primary"},{default:l(()=>[Ue,i(p,null,{default:l(()=>[i(w)]),_:1})]),_:1})]),_:1},8,["onCommand"])])])):Q("",!0)}var Xe=C(je,[["render",Ze]]);const Ye={components:{vHeader:Me,vSidebar:Ne,vTags:Xe},setup(){const e=I(),t=L(()=>e.state.tagsList.map(o=>o.name)),n=L(()=>e.state.collapse);return{tagsList:t,collapse:n}}},Ge={class:"about"},ze={class:"content"};function Je(e,t,n,o,s,d){const c=y("v-header"),_=y("v-sidebar"),p=y("v-tags"),w=y("router-view");return u(),v("div",Ge,[i(c),i(_),m("div",{class:j(["content-box",{"content-collapse":o.collapse}])},[i(p),m("div",ze,[i(w,null,{default:l(({Component:r})=>[i(ee,{name:"move",mode:"out-in"},{default:l(()=>[(u(),g(te,{include:o.tagsList},[(u(),g(R(r)))],1032,["include"]))]),_:2},1024)]),_:1})])],2)])}var Qe=C(Ye,[["render",Je]]);const et=[{path:"/",redirect:"/files"},{path:"/:patchMatch(.*)",redirect:"/404"},{path:"/",name:"Home",component:Qe,children:[{path:"/files",name:"Files",meta:{title:"\u5168\u90E8\u6587\u4EF6"},component:()=>b(()=>import("./files.4a242ff6.js"),["assets/files.4a242ff6.js","assets/files.0e37c960.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/run",name:"Run",meta:{title:"\u6B63\u5728\u4E0B\u8F7D"},component:()=>b(()=>import("./run.201827f5.js"),["assets/run.201827f5.js","assets/run.db61edd0.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/status",name:"Status",meta:{title:"\u4E0B\u8F7D\u5B8C\u6210"},component:()=>b(()=>import("./status.b36721a0.js"),["assets/status.b36721a0.js","assets/status.96f898ff.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])},{path:"/404",name:"404",meta:{title:"\u627E\u4E0D\u5230\u9875\u9762"},component:()=>b(()=>import("./404.9d59bb56.js"),["assets/404.9d59bb56.js","assets/404.01007f15.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js"])}]},{path:"/login",name:"Login",meta:{title:"\u767B\u5F55"},component:()=>b(()=>import("./login.bf8b7ed2.js"),["assets/login.bf8b7ed2.js","assets/login.5e481643.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js","assets/request.8c414e98.js"])},{path:"/getcode",name:"Code",meta:{title:"\u626B\u7801"},component:()=>b(()=>import("./code.8886198d.js"),["assets/code.8886198d.js","assets/code.418dd1f2.css","assets/_element-plus.3a35db37.js","assets/_element-plus.c582fe30.css","assets/__vendor.467a6c12.js","assets/_@vue.73c7d285.js","assets/_@element-plus.8770ec28.js","assets/request.8c414e98.js"])}],X=ae({history:le(),routes:et});X.beforeEach((e,t,n)=>{document.title=`${e.meta.title} | \u5EA6\u76D8\u7BA1\u7406`;const o=localStorage.getItem("baidusdk");(!o||o=="undefined")&&e.path!=="/login"?n("/login"):n(),n()});var tt=re({state:{tagsList:[],collapse:!1},mutations:{delTagsItem(e,t){e.tagsList.splice(t.index,1)},setTagsItem(e,t){e.tagsList.push(t)},clearTags(e){e.tagsList=[]},closeTagsOther(e,t){e.tagsList=t},closeCurrentTag(e,t){for(let n=0,o=e.tagsList.length;n<o;n++)if(e.tagsList[n].path===t.$route.fullPath){n<o-1?t.$router.push(e.tagsList[n+1].path):n>0?t.$router.push(e.tagsList[n-1].path):t.$router.push("/"),e.tagsList.splice(n,1);break}},handleCollapse(e,t){e.collapse=t}},actions:{},modules:{}}),ot=e=>{for(const t in D)e.component(t,D[t]);e.use(pe,{locale:me})};const Y=oe(ve);ot(Y);Y.use(tt).use(X).mount("#app");export{C as _,V as a,N as g,O as s};
