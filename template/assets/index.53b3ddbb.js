import{al as y,o as u,W as g,g as S,f as L,A as Z,c as v,a as m,X as l,a1 as i,a0 as k,$ as E,az as J,aA as Q,K as T,ad as O,Z as R,_ as Y,S as j,a3 as ee,aB as te,aw as oe}from"./_@vue.454cd839.js";import{a2 as se,a3 as I,a4 as N,a5 as q,a6 as ne,a7 as ae,a8 as le,a9 as re}from"./__vendor.a475fe49.js";import{E as H,a as M,b as ce,c as K,d as U,e as W,f as ie,g as de,h as ue,i as _e,j as pe,z as me}from"./_element-plus.6fe2094f.js";import{E as F}from"./_@element-plus.19db05d5.js";const fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(s){if(s.ep)return;s.ep=!0;const d=n(s);fetch(s.href,d)}};fe();var P=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const ge={};function he(e,t,n,o,s,d){const r=y("router-view");return u(),g(r)}var ve=P(ge,[["render",he]]);const ye="modulepreload",V={},xe="./",b=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${xe}${o}`,o in V)return;V[o]=!0;const s=o.endsWith(".css"),d=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":ye,s||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),s)return new Promise((_,p)=>{r.addEventListener("load",_),r.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},f="http://"+document.domain+":8182",A={getLogin:f+"/api/login",getCode:f+"/api/code",getAccessToken:f+"/api/at",getUserinfo:f+"/api/userinfo",getSize:f+"/api/size",getList:f+"/api/list",getFilemeta:f+"/api/meta",getFiles:f+"/api/download",getRun:f+"/api/run",getStop:f+"/api/stop",getStatus:f+"/api/status",delTask:f+"/api/deltask",delFiles:f+"/api/delfiles",logOut:f+"/api/logout"},C=se.create({timeout:5e4}),z=e=>{let t={title:"",message:""};if(e.response)if(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),t.title="\u9519\u8BEF"+e.response.status+" "+e.response.data.message,e.request.status==401&&(localStorage.removeItem("baidusdk"),window.location.reload()),Object.prototype.toString.call(e.response.data.errors)==="[object Object]"){for(const n in e.response.data.errors)if(Object.hasOwnProperty.call(e.response.data.errors,n)){const o=e.response.data.errors[n];t.message+=o.join(",")}}else t.message=e.response.data.errors;else e.request?console.log(e.request):console.log("Error",e.message);return H({title:t.title,type:"error",message:t.message}),console.log(e.message),Promise.reject(e)};C.interceptors.request.use(e=>{const t=localStorage.getItem("baidusdk");return t&&(e.headers.Baidusdk=t),e},z);C.interceptors.response.use(e=>{const{data:t}=e;return t.code!==200?(H({title:"\u8BF7\u6C42\u5931\u8D25",message:t.message,type:"error"}),RegExp(/\"errno\":-6/).test(t.message)&&(window.location.href="/#/getcode"),Promise.reject(new Error(t.message||"Error"))):e},z);function B(e){if(!e)return"0K";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}const we={setup(){const e=S(""),t=S(""),n=S(""),o=S(0);(()=>{C({url:A.getSize,method:"get"}).then(c=>{e.value=B(c.data.data.used)+"/"+B(c.data.data.total),o.value=c.data.data.used/c.data.data.total*100}),C({url:A.getUserinfo,method:"get"}).then(c=>{t.value=c.data.data.baidu_name,n.value=c.data.data.avatar_url})})();const d=I(),r=L(()=>d.state.collapse),_=()=>{d.commit("handleCollapse",!r.value)};Z(()=>{document.body.clientWidth<1500&&_()});const p=N();return{progress:o,size:e,username:t,avatar:n,collapse:r,collapseChage:_,handleCommand:c=>{c=="loginout"&&C({url:A.logOut,method:"get"}).then(a=>{p.push("/login")})}}}},Ee=e=>(J("data-v-583a8a82"),e=e(),Q(),e),ke={class:"header"},Le=Ee(()=>m("div",{class:"logo"},"\u5EA6\u76D8\u7BA1\u7406",-1)),be={class:"header-right"},Te={class:"header-user-con"},$e={class:"diskuse"},Ce={style:{color:"#fff"}},Pe={class:"user-avator"},Se=["src"],Oe={class:"el-dropdown-link"};function Ie(e,t,n,o,s,d){const r=y("fold"),_=M,p=y("expand"),x=ce,c=y("caret-bottom"),a=K,h=U,w=W;return u(),v("div",ke,[m("div",{class:"collapse-btn",onClick:t[0]||(t[0]=(...$)=>o.collapseChage&&o.collapseChage(...$))},[o.collapse?(u(),g(_,{key:1},{default:l(()=>[i(p)]),_:1})):(u(),g(_,{key:0},{default:l(()=>[i(r)]),_:1}))]),Le,m("div",be,[m("div",Te,[m("div",$e,[i(x,{percentage:o.progress},{default:l(()=>[m("span",Ce,k(o.size),1)]),_:1},8,["percentage"])]),m("div",Pe,[m("img",{src:o.avatar},null,8,Se)]),i(w,{class:"user-name",trigger:"click",onCommand:o.handleCommand},{dropdown:l(()=>[i(h,null,{default:l(()=>[i(a,{command:"loginout"},{default:l(()=>[E("\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:l(()=>[m("span",Oe,[E(k(o.username)+" ",1),i(_,null,{default:l(()=>[i(c)]),_:1})])]),_:1},8,["onCommand"])])])])}var Ae=P(we,[["render",Ie],["__scopeId","data-v-583a8a82"]]);const Re={setup(){const e=[{icon:"Files",index:"/files",title:"\u5168\u90E8\u6587\u4EF6"},{icon:"VideoPlay",index:"/run",title:"\u6B63\u5728\u4E0B\u8F7D"},{icon:"List",index:"/status",title:"\u4E0B\u8F7D\u5B8C\u6210"}],t=q(),n=L(()=>t.path),o=I(),s=L(()=>o.state.collapse);return{items:e,onRoutes:n,collapse:s}}},Me={class:"sidebar"};function De(e,t,n,o,s,d){const r=M,_=ie,p=de,x=ue;return u(),v("div",Me,[i(x,{class:"sidebar-el-menu","default-active":o.onRoutes,collapse:o.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""},{default:l(()=>[(u(!0),v(T,null,O(o.items,c=>(u(),v(T,null,[c.subs?(u(),g(p,{index:c.index,key:c.index},{title:l(()=>[i(r,null,{default:l(()=>[(u(),g(R(c.icon)))]),_:2},1024),m("span",null,k(c.title),1)]),default:l(()=>[(u(!0),v(T,null,O(c.subs,a=>(u(),v(T,null,[a.subs?(u(),g(p,{index:a.index,key:a.index},{title:l(()=>[E(k(a.title),1)]),default:l(()=>[(u(!0),v(T,null,O(a.subs,(h,w)=>(u(),g(_,{key:w,index:h.index},{default:l(()=>[E(k(h.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(u(),g(_,{index:a.index,key:a.index},{default:l(()=>[E(k(a.title),1)]),_:2},1032,["index"]))],64))),256))]),_:2},1032,["index"])):(u(),g(_,{index:c.index,key:c.index},{title:l(()=>[E(k(c.title),1)]),default:l(()=>[i(r,null,{default:l(()=>[(u(),g(R(c.icon)))]),_:2},1024)]),_:2},1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse"])])}var Fe=P(Re,[["render",De],["__scopeId","data-v-e31cbdac"]]);const Ve={setup(){const e=q(),t=N(),n=a=>a===e.fullPath,o=I(),s=L(()=>o.state.tagsList),d=L(()=>s.value.length>0),r=a=>{const h=s.value[a];o.commit("delTagsItem",{index:a});const w=s.value[a]?s.value[a]:s.value[a-1];w?h.path===e.fullPath&&t.push(w.path):t.push("/")},_=a=>{s.value.some(w=>w.path===a.fullPath)||(s.value.length>=8&&o.commit("delTagsItem",{index:0}),o.commit("setTagsItem",{name:a.name,title:a.meta.title,path:a.fullPath}))};_(e),ne(a=>{_(a)});const p=()=>{o.commit("clearTags"),t.push("/")},x=()=>{const a=s.value.filter(h=>h.path===e.fullPath);o.commit("closeTagsOther",a)};return{isActive:n,tagsList:s,showTags:d,closeTags:r,handleTags:a=>{a==="other"?x():p()}}}},Be={key:0,class:"tags"},je=["onClick"],Ne={class:"tags-close-box"};function qe(e,t,n,o,s,d){const r=y("router-link"),_=y("close"),p=M,x=y("arrow-down"),c=_e,a=K,h=U,w=W;return o.showTags?(u(),v("div",Be,[m("ul",null,[(u(!0),v(T,null,O(o.tagsList,($,D)=>(u(),v("li",{class:j(["tags-li",{active:o.isActive($.path)}]),key:D},[i(r,{to:$.path,class:"tags-li-title"},{default:l(()=>[E(k($.title),1)]),_:2},1032,["to"]),m("span",{class:"tags-li-icon",onClick:Qe=>o.closeTags(D)},[i(p,null,{default:l(()=>[i(_)]),_:1})],8,je)],2))),128))]),m("div",Ne,[i(w,{onCommand:o.handleTags},{dropdown:l(()=>[i(h,{size:"small"},{default:l(()=>[i(a,{command:"other"},{default:l(()=>[E("\u5173\u95ED\u5176\u4ED6")]),_:1}),i(a,{command:"all"},{default:l(()=>[E("\u5173\u95ED\u6240\u6709")]),_:1})]),_:1})]),default:l(()=>[i(c,{size:"mini",type:"primary"},{default:l(()=>[E(" \u6807\u7B7E\u9009\u9879 "),i(p,null,{default:l(()=>[i(x)]),_:1})]),_:1})]),_:1},8,["onCommand"])])])):Y("",!0)}var He=P(Ve,[["render",qe]]);const Ke={components:{vHeader:Ae,vSidebar:Fe,vTags:He},setup(){const e=I(),t=L(()=>e.state.tagsList.map(o=>o.name)),n=L(()=>e.state.collapse);return{tagsList:t,collapse:n}}},Ue={class:"about"},We={class:"content"};function ze(e,t,n,o,s,d){const r=y("v-header"),_=y("v-sidebar"),p=y("v-tags"),x=y("router-view");return u(),v("div",Ue,[i(r),i(_),m("div",{class:j(["content-box",{"content-collapse":o.collapse}])},[i(p),m("div",We,[i(x,null,{default:l(({Component:c})=>[i(ee,{name:"move",mode:"out-in"},{default:l(()=>[(u(),g(te,{include:o.tagsList},[(u(),g(R(c)))],1032,["include"]))]),_:2},1024)]),_:1})])],2)])}var Ge=P(Ke,[["render",ze]]);const Xe=[{path:"/",redirect:"/files"},{path:"/:patchMatch(.*)",redirect:"/404"},{path:"/",name:"Home",component:Ge,children:[{path:"/files",name:"Files",meta:{title:"\u5168\u90E8\u6587\u4EF6"},component:()=>b(()=>import("./files.9520f00a.js"),["assets/files.9520f00a.js","assets/files.c4b76b77.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/_@element-plus.19db05d5.js"])},{path:"/run",name:"Run",meta:{title:"\u6B63\u5728\u4E0B\u8F7D"},component:()=>b(()=>import("./run.65b513d5.js"),["assets/run.65b513d5.js","assets/run.7e71f9a0.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/_@element-plus.19db05d5.js"])},{path:"/status",name:"Status",meta:{title:"\u4E0B\u8F7D\u5B8C\u6210"},component:()=>b(()=>import("./status.e77fb654.js"),["assets/status.e77fb654.js","assets/status.96f898ff.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/_@element-plus.19db05d5.js"])},{path:"/404",name:"404",meta:{title:"\u627E\u4E0D\u5230\u9875\u9762"},component:()=>b(()=>import("./404.bb5ce8d1.js"),["assets/404.bb5ce8d1.js","assets/404.01007f15.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/_@element-plus.19db05d5.js"])}]},{path:"/login",name:"Login",meta:{title:"\u767B\u5F55"},component:()=>b(()=>import("./login.1c7099d1.js"),["assets/login.1c7099d1.js","assets/login.5e481643.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/request.7a3d235a.js","assets/_@element-plus.19db05d5.js"])},{path:"/getcode",name:"Code",meta:{title:"\u626B\u7801"},component:()=>b(()=>import("./code.9e103ad6.js"),["assets/code.9e103ad6.js","assets/code.418dd1f2.css","assets/_element-plus.6fe2094f.js","assets/_element-plus.afcfd245.css","assets/_@vue.454cd839.js","assets/__vendor.a475fe49.js","assets/request.7a3d235a.js","assets/_@element-plus.19db05d5.js"])}],G=ae({history:le(),routes:Xe});G.beforeEach((e,t,n)=>{document.title=`${e.meta.title} | \u5EA6\u76D8\u7BA1\u7406`;const o=localStorage.getItem("baidusdk");(!o||o=="undefined")&&e.path!=="/login"?n("/login"):n(),n()});var Ze=re({state:{tagsList:[],collapse:!1},mutations:{delTagsItem(e,t){e.tagsList.splice(t.index,1)},setTagsItem(e,t){e.tagsList.push(t)},clearTags(e){e.tagsList=[]},closeTagsOther(e,t){e.tagsList=t},closeCurrentTag(e,t){for(let n=0,o=e.tagsList.length;n<o;n++)if(e.tagsList[n].path===t.$route.fullPath){n<o-1?t.$router.push(e.tagsList[n+1].path):n>0?t.$router.push(e.tagsList[n-1].path):t.$router.push("/"),e.tagsList.splice(n,1);break}},handleCollapse(e,t){e.collapse=t}},actions:{},modules:{}}),Je=e=>{for(const t in F)e.component(t,F[t]);e.use(pe,{locale:me})};const X=oe(ve);Je(X);X.use(Ze).use(G).mount("#app");export{P as _,A as a,B as g,C as s};
