import{n as g,i as h,p as v,s as f}from"./_element-plus.3a35db37.js";import{Z as w,Y as x}from"./__vendor.467a6c12.js";import{_ as k,a as _}from"./index.365ff3a3.js";import{s as d}from"./request.8c414e98.js";import{f as i,o as y,S as C,T as a,_ as c,a as n,Z as S,aw as T,ax as b,Y as B}from"./_@vue.73c7d285.js";import"./_@element-plus.8770ec28.js";const E={setup(){const o=w(),s=i(""),l=i(""),e=i("");(()=>{d({url:_.getCode,method:"get"}).then(t=>{s.value=t.data.data.user_code,l.value=t.data.data.verification_url,e.value=t.data.data.qrcode_url})})();const u=()=>{d({url:_.getAccessToken,method:"get"}).then(t=>{t.data.code!==200?f.error("token\u83B7\u53D6\u5931\u8D25,\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u65B0\u6388\u6743"):d({url:_.getUserinfo,method:"get"}).then(p=>{f.success("\u6388\u6743\u6210\u529F"),o.push("/")})})};return x().commit("clearTags"),{user_code:s,verification_url:l,qrcode_url:e,getAccessToken:u}}},I=o=>(T("data-v-9a7b3946"),o=o(),b(),o),q=I(()=>n("p",null,"\u626B\u4E8C\u7EF4\u7801",-1)),A=["src"],N=["src"],V=B("\u5DF2\u5B8C\u6210\u6388\u6743");function R(o,s,l,e,m,u){const r=g,t=h,p=v;return y(),C(p,{gutter:20},{default:a(()=>[c(r,{span:6},{default:a(()=>[q,n("img",{src:e.qrcode_url,alt:""},null,8,A)]),_:1}),c(r,{span:6},{default:a(()=>[n("p",null,"\u6216\u5728\u4E0B\u9762\u8F93\u5165:"+S(e.user_code),1),n("iframe",{src:e.verification_url,width:"500px",height:"500px",frameborder:"0",sandbox:"allow-scripts allow-forms allow-same-origin"},null,8,N)]),_:1}),c(r,{span:12,offset:6},{default:a(()=>[c(t,{style:{width:"100%"},size:"large",type:"primary",plain:"",onClick:s[0]||(s[0]=U=>e.getAccessToken())},{default:a(()=>[V]),_:1})]),_:1})]),_:1})}var j=k(E,[["render",R],["__scopeId","data-v-9a7b3946"]]);export{j as default};
