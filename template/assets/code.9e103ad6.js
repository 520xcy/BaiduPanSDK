import{m as g,i as h,o as v,r as m}from"./_element-plus.6fe2094f.js";import{a4 as w,a3 as x}from"./__vendor.a475fe49.js";import{_ as k,a as d}from"./index.53b3ddbb.js";import{s as _}from"./request.7a3d235a.js";import{g as i,o as y,W as C,X as s,a1 as c,a as n,a0 as b,$ as S,az as T,aA as A}from"./_@vue.454cd839.js";import"./_@element-plus.19db05d5.js";const B={setup(){const o=w(),a=i(""),l=i(""),e=i("");(()=>{_({url:d.getCode,method:"get"}).then(t=>{a.value=t.data.data.user_code,l.value=t.data.data.verification_url,e.value=t.data.data.qrcode_url})})();const u=()=>{_({url:d.getAccessToken,method:"get"}).then(t=>{t.data.code!==200?m.error("token\u83B7\u53D6\u5931\u8D25,\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u65B0\u6388\u6743"):_({url:d.getUserinfo,method:"get"}).then(p=>{m.success("\u6388\u6743\u6210\u529F"),o.push("/")})})};return x().commit("clearTags"),{user_code:a,verification_url:l,qrcode_url:e,getAccessToken:u}}},E=o=>(T("data-v-9a7b3946"),o=o(),A(),o),I=E(()=>n("p",null,"\u626B\u4E8C\u7EF4\u7801",-1)),q=["src"],N=["src"];function V(o,a,l,e,f,u){const r=g,t=h,p=v;return y(),C(p,{gutter:20},{default:s(()=>[c(r,{span:6},{default:s(()=>[I,n("img",{src:e.qrcode_url,alt:""},null,8,q)]),_:1}),c(r,{span:6},{default:s(()=>[n("p",null,"\u6216\u5728\u4E0B\u9762\u8F93\u5165:"+b(e.user_code),1),n("iframe",{src:e.verification_url,width:"500px",height:"500px",frameborder:"0",sandbox:"allow-scripts allow-forms allow-same-origin"},null,8,N)]),_:1}),c(r,{span:12,offset:6},{default:s(()=>[c(t,{style:{width:"100%"},size:"large",type:"primary",plain:"",onClick:a[0]||(a[0]=z=>e.getAccessToken())},{default:s(()=>[S("\u5DF2\u5B8C\u6210\u6388\u6743")]),_:1})]),_:1})]),_:1})}var X=k(B,[["render",V],["__scopeId","data-v-9a7b3946"]]);export{X as default};
